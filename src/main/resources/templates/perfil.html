<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout}">

<head>
	<meta charset=" utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
	<title>Vegapp</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,700&amp;display=swap">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
	<link rel="stylesheet" href="assets/css/Countries-Select-Menu.css">
	<link rel="stylesheet" href="../css/footer.css">
	<link rel="stylesheet" href="../css/Navigation-Clean.css">
	<link rel="stylesheet" href="../css/input-img.css">
	<link rel="stylesheet" href="../css/signin.css">

</head>
<!--<head th:replace= "/fragments/head :: head"></head>
	-->

<body>
	<nav th:replace= "/fragments/navbar :: nav"></nav>
	
	<header>
		<h2 class="masthead-subheading mb-0" th:if="${session.usuariosession != null}"></h2>
	</header>
	<div class="container" id="container-form" style="max-width: 1050px; max-height:700px;">
		<div class="row">
			<div class="col-md-12 mb-3" id="bienvenida" style="height: 100px;">
				<h1 class="text-center" style="height: 30px;font-family: Roboto, sans-serif;font-weight: bold;">
					Tu Perfil</h1>
				<p class="text-center" style="font-family: Roboto, sans-serif;padding: 0px;text-align: center;">
					<br>Gracias por formar parte del grupo! <br><br><br>
				</p>
			</div>
		</div>
		<div class="row" id="form-sigin" style="height: 530px;margin-top: 8px;">
			<div class="col-md-6" id="form-1">
				<section>
					<div class="p-3">

						<form th:action="@{/usuario/actualizar-perfil}" method="POST" enctype="multipart/form-data">


							<p th:if="${error != null}" th:text="${error}" style="color:red;"></p>

							<input type="hidden" name="id" th:value="${perfil.id}" />

							<label class="form-label">Nombre</label>
							<input class="form-control casilleros" type="text" name="nombre"
								th:value="${perfil.nombre}" />

							<label>Apellido</label>
							<input class="form-control casilleros" type="text" name="apellido"
								th:value="${perfil.apellido}" />
							<label>Edad</label>
							
							<input class="form-control casilleros" type="text" name="edad"
								th:value="${perfil.edad}" />

							<label>E-Mail</label>
							<input class="form-control casilleros" type="text" name="email"
								th:value="${perfil.email}" />

							<label>Foto</label>
							<input type="file" class="form-control" name="archivo" />
							<br>
							<!--<label>Zona</label><br>
							<select name="provincia" id="provincia" class="select" th:object="${zona}"
								th:field="*{provincia}">
								<input type="hidden" name="id" th:value="${zona.id}" />
								<option th:text="'Selecione una provincia'" th:value="${provincia}" />
								<option class="form-control" th:each="provincia : ${provincias}"
									th:text="${provincia.nombre}" th:value="${provincia.nombre}" />
							</select>


							<select class="select" id="departamento" name="departamento" th:object="${zona}"
								th:field="*{departamento}">
								<input type="hidden" name="id" th:value="${zona.id}" />
								<option th:text="'Selecione un Departamento'" th:value="${departamento}" />
								<option th:fragment="departamentos" th:each="departamento : ${departamentosList}"
									th:value="${departamento.nombre}" th:text="${departamento.nombre}" />
								</option>
							</select>

							<select class="select" id="ciudad" name="ciudad" th:object="${zona}" th:field="*{ciudad}">
								<input type="hidden" name="id" th:value="${zona.id}" />
								<option th:text="'Selecione una Ciudad'" th:value="${ciudad}" />
								<option th:fragment="ciudades" th:each="ciudad : ${ciudadesList}"
									th:value="${ciudad.nombre}" th:text="${ciudad.nombre}">
								</option>
							</select>
							<br>
							<br>-->

							<label>Clave</label>
							<input type="password" class="form-control" name="clave1" th:value="${clave1}" />

							<label>Repetir Clave</label>
							<input type="password" class="form-control" name="clave2" th:value="${clave2}" />

							<br />

					</div>
					
				</section>

			</div>

				

			<div class="col-md-6" id="form-2" style="margin-top: 20px;">
                	<div id="image-form" style="margin-left: 50px;width: 200px;">
						<img 
						style="text-align: right;width: 300px;height: 234.422px;" th:src="@{/img/icono-usuario.png}" alt="">
                        </div>
                        <button class="btn btn-lg text-center" id="boton-registro" type="submit"
					style="margin-top: 100px;font-family: Roboto, sans-serif;font-weight: bold;text-align: center;width: 182.328px;margin-left: 116px;">Actualizar
					Perfil
			</button>
			<button class="btn btn-lg text-center" id="boton-registro" type="button"
					style="margin-top: 15px;font-family: Roboto, sans-serif;font-weight: bold;text-align: center;width: 182.328px;margin-left: 116px;"
					><a th:href="@{/usuario/eliminar}+'?id='+${perfil.id}" style="text-decoration: none;color: #ffffff;">Eliminar cuenta</a>
			</button>
			</div>
			
			</div>
			</form>
			<div class="col-md-6" id="form-3" style="margin-top: 3px;">
			
			</div>
		
		
	</div>
	</div>
	
	<footer th:replace= "/fragments/footer :: footer"></footer>

	
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
	<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>-->

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
		crossorigin="anonymous"></script>

	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"
		integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js"
		integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/"
		crossorigin="anonymous"></script>

	<!--//// ESTO ES JQUERY QUE MANEJA EL DOM. LAS VISTAS DEL HTML CON JS -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

	<!--/////ACA VAN LOS JQUERY QUE RECUPERA LOS VALORES. el $("#provincia") es el id del html del elemnto que busco, cuando
	hago el clik(.change) dispara la funcion que evalua si esta nulo(seleccione una prov) lo deja null y sino
	hace una pegada al controlador ("/zona/departamentos") con el valos de la provincia seleccionada como id
	data es lo que devuelve la pegada y se lo asigna al html    -->
	<script>

		$("#provincia").change(function () {
			if (!this.value) {
				$("#departamento").html(null);
				return;
			}
			$.get("/zona/departamentos/" + this.value, function (data) {
				$("#departamento").html(data);
			});
		});

		$("#departamento").change(function () {
			if (!this.value) {
				$("#ciudad").html(null);
				return;
			}
			$.get("/zona/ciudades/" + this.value, function (data) {
				$("#ciudad").html(data);
			});
		});
	</script>

</body>

</html>